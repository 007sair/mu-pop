!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.mu=e()}(this,function(){var t="mu_modal",e=0,n={},i=function(t,e){return(e=e||!1)?document.querySelectorAll(t):document.querySelector(t)},a=function(e,n){return t+(e?"-"+e:"")+(n?"--"+n:"")},s=function(e){var n=i("#"+t+"-"+e);return!!n&&{wrap:n,mask:n.querySelector("."+a("mask")),main:n.querySelector("."+a("container")).children[0]}};function o(t){this.opts=function(t,e){for(var n in e)t[n]=e[n];return t}({type:"default",content:"",mask:!0,maskClose:!0,delay:.25,time:0,animate:"scale",style:"",className:"",btn:!1},t),this.init()}function c(t,e){return 0!=(e=e||"").replace(/\s/g,"").length&&new RegExp(" "+e+" ").test(" "+t.className+" ")}function r(t,e){c(t,e)||(t.className=""==t.className?e:t.className+" "+e)}function l(t,e){if(c(t,e)){for(var n=" "+t.className.replace(/[\t\r\n]/g,"")+" ";n.indexOf(" "+e+" ")>=0;)n=n.replace(" "+e+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")}}function m(t,e){e=e||i("body"),t.parentNode===e&&e.removeChild(t)}return o.prototype={constructor:o,init:function(t){n[e]={config:this.opts,duration:{},delay:{}},this.insert()},insert:function(){var o=this,c=this.opts,r=document.createElement("div");r.id=t+"-"+e,r.className=a("wrap"),r.setAttribute("type",c.type),i("."+a("wrap"),!0).forEach(function(e){var n=e.getAttribute("type"),i=e.id.split(t+"-")[1];n===c.type&&mu.close(i)}),"toast"===c.type&&(c.mask=!1),"alert"===c.type&&(c.content='<div class="'+a("alert_content")+'">'+c.content+"</div>"),"slide"===c.type&&(c.animate="slide"),"loading"===c.type&&(c.animate=!1,c.content=c.content?"<p>"+c.content+"</p>":c.content);var l=function(){"string"==typeof c.btn&&(c.btn=[c.btn]);var t,e=(c.btn||[]).length;return 0!==e&&c.btn?(c.btn=c.btn.reverse(),t='<span yes type="1">'+c.btn[0]+"</span>",2===e&&(t='<span no type="0">'+c.btn[1]+"</span>"+t),'<div class="'+a("alert_btns")+'">'+t+"</div>"):""}(),m=[a("mask"),c.animate?a("fade"):""].join(" "),u=[a("main"),a(c.type),c.from?a(c.type+"_"+c.from):null,c.className?c.className:null,c.animate?a(c.animate):""].filter(function(t){return t}).join(" ");"function"==typeof c.content&&(c.content=c.content.call(this,function(t){s(o.index).main.innerHTML=t})),r.innerHTML=[c.mask?'<div style="'+("string"==typeof c.mask?c.mask:"")+'" class="'+m+'"></div>':"",'<div class="'+a("container")+'">','<div class="'+u+'" style="'+(c.style?c.style:"")+'">',c.title?'<div class="'+a("title")+'">'+c.title+"</div>":"",c.content,c.btn?l:"","</div>","</div>"].join(""),i("body").appendChild(r),this.index=e++,this.emit(c),"function"==typeof n[this.index].config.open&&n[this.index].config.open.call(this)},emit:function(t){var e=this,o=s(this.index);(o.wrap.offsetWidth,t.animate&&r(o.main,a(t.animate,"in")),t.mask&&o.mask&&(t.animate&&r(o.mask,a("fade","in")),t.maskClose&&o.mask.addEventListener("click",function(){mu.close(e.index)})),t.btn)&&i("."+a("alert_btns")+" span",!0).forEach(function(n){n.addEventListener("click",function(){0==this.getAttribute("type")?(t.no&&t.no(),mu.close(e.index)):t.yes?t.yes(e.index):mu.close(e.index)})});t.time&&(n[this.index].duration=setTimeout(function(){mu.close(e.index)},1e3*t.time))}},{v:"1.0.0",open:function(t){return new o(t||{}).index},close:function(t){var e=s(t);if(e){var i=n[t].config;e.mask&&l(e.mask,a("fade","in")),l(e.main,a(i.animate,"in"));var o=i.animate?1e3*i.delay:0;clearTimeout(n[t].delay),n[t].delay=setTimeout(function(){m(e.wrap),"function"==typeof n[t].config.close&&n[t].config.close(),delete n[t]},o)}},closeAll:function(){var t=i("."+a("wrap"),!0);t.length&&t.forEach(function(t){m(_wrap)})}}});